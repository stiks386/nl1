/*! Thrive Architect - 2022-01-25
* http://www.thrivethemes.com/
* Copyright (c) 2022 Thrive Themes */

"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(d){var p,u,n,v,h,i={".js":[],".json":[],".css":[],".html":[]},c="function"==typeof require?require:null;return v=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},h=function(t,e,r){var a,n;if("function"==typeof t[e+r])return e+r;for(a=0;n=i[r][a];++a)if("function"==typeof t[e+n])return e+n;return null},p=function(t,e,r,a,n,i){var o,s,d,c,l,f;for("."!==(o=(r=r.split("/")).pop())&&".."!==o||(r.push(o),o="");null!=(s=r.shift());)if(s&&"."!==s&&(".."===s?(t=e.pop(),i=i.slice(0,i.lastIndexOf("/"))):(e.push(t),t=t[s],i+="/"+s),!t))throw v(a);if(o&&"function"!=typeof t[o]&&((f=(f=(f=(f=h(t,o,".js"))||h(t,o,".json"))||h(t,o,".css"))||h(t,o,".html"))?o=f:2!==n&&"object"===_typeof(t[o])&&(e.push(t),t=t[o],i+="/"+o,o="")),!o)return 1!==n&&t[":mainpath:"]?p(t,e,t[":mainpath:"],a,1,i):p(t,e,"index",a,2,i);if(!(l=t[o]))throw v(a);return l.hasOwnProperty("module")?l.module.exports:(d={},l.module=c={exports:d,id:i+"/"+o},l.call(d,d,c,u(t,e,i)),c.exports)},n=function(t,e,r,a){var n,i=r,o=r.charAt(0),s=0;if("/"===o){if(i=i.slice(1),!(t=d["/"])){if(c)return c(r);throw v(r)}a="/",e=[]}else if("."!==o){if(n=i.split("/",1)[0],!(t=d[n])){if(c)return c(r);throw v(r)}a=n,e=[],(i=i.slice(n.length+1))||(s=(i=t[":mainpath:"])?1:(i="index",2))}return p(t,e,i,r,s,a)},(u=function(e,r,a){return function(t){return n(e,[].concat(r),t,a)}})(d,[],"")}({workspace:{editor:{js:{frontend:{modules:{"lead-generation.js":function(t,e,r){void 0===TCB_Front.js_modules["lead-generation"]&&TCB_Front.setModuleLoadedStatus("lead-generation",!1),function(I){if(!TCB_Front.isModuleLoaded("lead-generation")){I(window).on("tcb_after_dom_ready",function(){var t=I(TCB_Front.Utils.isEditorPage()?"#tve_editor":"body");P.initRadioInputs(t),P.initCheckboxInputs(t),TCB_Front.Utils.isEditorPage()||(I(".thrv_lead_generation").tve_front_lead_generation(),P.initRecaptcha())});var P={initRadioInputs:function(t){t.off("change.inputradio").on("change.inputradio",".tve_lg_radio_wrapper input",function(t){var e=I(this).closest(".tve_lg_radio_wrapper");e.siblings(".tve-state-expanded").removeClass("tve-state-expanded"),e.addClass("tve-state-expanded")})},initCheckboxInputs:function(t){t.off("change.inputcheckbox").on("change.inputcheckbox",".tve_lg_checkbox_wrapper input",function(t){var e=I(this);e.closest(".tve_lg_checkbox_wrapper").toggleClass("tve-state-expanded",e.prop("checked"))})},initRecaptcha:function(){var e=I(".tve-captcha-container");if(e.length){var t=function t(){"undefined"!=typeof grecaptcha&&grecaptcha.render?function(){var r=100;e.filter(":not(.tve-recapcha-rendered)").each(function(){this.id=this.id+"-"+ ++r;var t=I(this),e=window.innerWidth<400?"compact":t.attr("data-size");t.addClass("tve-recaptcha-rendered"),t.data("grecaptcha-render")||tve_dash_front.recaptcha.connection&&(!tve_dash_front.recaptcha.connection||"v3"===tve_dash_front.recaptcha.connection.version)||(t.data("grecaptcha-render",!0),grecaptcha.render(this.id,{sitekey:tve_dash_front.recaptcha.site_key||t.attr("data-site-key"),theme:t.attr("data-theme"),type:t.attr("data-type"),size:e}))})}():setTimeout(t,50)},r=!1,a=tve_dash_front.recaptcha.connection&&"v3"===tve_dash_front.recaptcha.connection.version&&!tve_dash_front.recaptcha.connection.browsing_history?tve_dash_front.recaptcha.site_key:"explicit";window.tve_gapi_loaded||(I.getScript("https://www.google.com/recaptcha/api.js?render="+a,t),r=!0,window.tve_gapi_loaded=!0),r||t()}},hasFileUpload:function(){return TCB_Front.isModuleLoaded("file-upload")}};I.fn.tve_front_lead_generation=function(){var n=this,q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return window.TCB_PAGE_INDEX=window.TCB_PAGE_INDEX||1,this.each(function(t,e){var x=I(e),k=x.find("form"),r=k.find(".tve-f-a-hidden").val();if(0===k.length&&(x.find(".thrv_lead_generation_container").wrapInner('<form method="post"></form>'),k=x.find("form")),k.find(".tve_lg_textarea.tve-lg-show-counter textarea").off("input.textarea").on("input.textarea",function(){var t=I(this),e=t.val().length,r=Number(t.attr("maxlength")),a=Number(t.attr("data-min")),n=t.next().find(".tve-fill-text-dynamic");n.text(r?"".concat(e," of ").concat(r):e),n.toggleClass("tve-counter-error",!!(e&&a&&e<a))}),k.find('input[type="checkbox"],input[type="radio"]').each(function(){if(!this.id)return!0;I("#"+this.id).not(this).length&&(this.id=this.id+"-"+window.TCB_PAGE_INDEX++,I(this).next("label").attr("for",this.id))}),void 0!==r&&"#"===k.attr("action")&&k.attr("action",r),x.data("tve_lg_done"))return n;if(x.data("tve_lg_done",!0),void 0!==window.SegMet&&SegMet&&-1!==k[0].action.indexOf("infusionsoft")&&!k.data("tve-segmet-submit")){k.data("tve-segmet-submit",1);var a=k[0].submit;k[0].submit=function(){return k.data("tve-segmet-submitted")?a.call(k[0]):(k.data("tve-segmet-submitted",1),k.submit())}}var C,E={errClass:"tve-lg-error",errClassMultiple:"tve-lg-error-multiple",init:function(){this.container=k.closest(".thrv_lead_generation").find("#tve-lg-error-container"),this.container.length||(this.container=I('<div id="tve-lg-error-container"></div>').prependTo(k.parent()),this.container.on("click",".tve-lg-err-close",I.proxy(this.close,this))),this.container.empty().hide(),this.clear()},close:function(){this.container.fadeOut(200);var t=k.find("."+this.errClass);return t.length||(t=k.find("input,select,textarea")),t.first().trigger("focus"),!1},clear:function(){k.find("input,select,textarea").removeClass(this.errClass),k.find('[class^="tve_lg_"]').removeClass(this.errClassMultiple+" "+this.errClass),"function"==typeof q.clearErrors&&q.clearErrors.apply(this,arguments)},markApiError:function(t,e,r){var a=1<arguments.length&&void 0!==e?e:I(),n=2<arguments.length&&void 0!==r?r:"";return"function"==typeof q.renderError?q.renderError(a,t,n):this.container.append('<div class="tve-lg-err-item tve-lg-ext-err">'+t+"</div>"),this},_markError:function(t,e,r){if("function"==typeof q.renderError)return q.renderError.call(this,t,e,r);if(t){var a=t.parent();a.removeClass("tcb-permanently-hidden"),a.closest("form").find('[data-label-for="'.concat(a.attr("data-label"),'"]')).removeClass("tcb-permanently-hidden"),t.addClass(this.errClass);var n=t.attr("data-field")?t.attr("data-field").replace("mapping_",""):t.attr("type");"gdpr"===n&&(n="checkbox"),["radio","checkbox"].includes(n)?t.closest(".tve_lg_"+n).addClass(this.errClassMultiple):"select"===n&&t.closest(".tve_lg_dropdown").addClass(this.errClass)}"required"===r&&this.container.find(".tve-lg-required").length||this.container.append('<div class="tve-lg-err-item tve-lg-'+r+'">'+e+"</div>")},show:function(){if("function"!=typeof q.renderError){this.container.append('<a href="javascript:void(0)" class="tve-lg-err-close" title="Close"><span class="thrv-icon thrv-svg-icon">'+TCB_Front.icons.get("cross")+"</span></a>");var a=this;setTimeout(function(){var t=k.offset(),e=parseInt(k.css("margin-top")),r=-10-a.container.outerHeight(!0)-(isNaN(e)?0:e);k.parents(".thrv-ribbon").length&&("bottom"===k.parents(".tve-leads-ribbon").attr("data-position")?r+=7:r=t.top+k.outerHeight()),a.container.css({top:r+"px",width:k.outerWidth()}).fadeIn(200)},50)}},phone:function(t,e){return!0},required:function(t,e){var r=!0,a="required";if("radio"===t.attr("type"))r=I('input[name="'+t.attr("name")+'"]').is(":checked");else if("checkbox"===t.attr("type"))r=I('input[name="'+t.attr("name")+'"]').is(":checked");else if(t.is("textarea[data-min]")){var n=I.trim(t.val()).length;!(r=n>=t.attr("data-min"))&&n&&(a="min-chars",e=tve_frontend_options.translations.min_chars.replace("%s",t.attr("data-min")))}else{var i=t.attr("value")?t.attr("value"):t.val();r=0<I.trim(i).length}return!!r||(this._markError(t,e,a),!1)},password:function(t,e){var r=!0;return t.val()||1!==t.data("required")||(r=!1),!!r||(this._markError(t,e,"password"),!1)},mismatch:function(t,e){var r=!0;return t.password&&t.password.val()!==t.confirm_password.val()&&(r=!1),!!r||(this._markError(t.confirm_password,e,"passwordmismatch"),!1)},email:function(t,e){return!!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.val())||(this._markError(t,e,"email"),!1)},getErrors:function(t){try{return JSON.parse(t.find(".tve-lg-err-msg").val())}catch(t){return{file_extension:"Sorry, {fileextension} files are not allowed",file_size:"{file} exceeds the maximum file size of {filelimit}",required:"Please fill in all of the required fields",phone:"The phone number is not valid",email:"The email address is not valid"}}}};P.hasFileUpload()&&(C=new TCB_Front.FileUpload(x));function F(t,e){var r=I.extend({success:"Sign up successful",error:"Error!"},e),a=k.find("#_form_type").val(),n=k.find("input[name=name]").val()?k.find("input[name=name]").val():"",i=k.find("input[name=email]").val();if(t){k.parents(".tl-style").first().find(".tve_p_lb_close").trigger("click");var o=I.Event("leads_messages.tcb");k.trigger(o),"lead_generation"===a&&(k.find("input").val(""),k.parents(".tve_p_lb_content").find(".tve_p_lb_close").trigger("click")),r.success=r.success.replace("[lead_email]",i),r.success=r.success.replace("[lead_name]",n),TCB_Front.notificationElement.toggle(r.success,"success","")}else{var s=k.parent(),d=s.parent(),c=d.find(".tve-error-wrapper"),l=k.find("#_error_message_option").val();if(1===parseInt(l))s.hide(),0===c.length?(d.append('<div class="tve-error-wrapper"><div class="tve-error-content"></div><button class="tve-close-error-message">Retry</button></div>'),r.error=r.error.replace("[lead_email]",i),r.error=r.error.replace("[lead_name]",n),d.find(".tve-error-content").append(r.error)):d.find(".tve-error-wrapper").show();else{if(TCB_Front.notificationElement.toggle(r.success,"success",""),L())return;O(),S()}}k.tve_form_loading(!0)}var T=function(t){return t&&0<t.length?t+",":""},B=function(){var n="";return"true"===k.find(".tve_lg_radio").attr("data-answer-tag")?k.find(".tve_lg_radio input[type=radio]").each(function(t,e){if(e.checked)if(e.attributes["data-custom-tag"]){var r=e.attributes["data-custom-tag"].value;n=0<n.length?n+","+r:r}else{var a=e.value;n=0<n.length?n+","+a:a}}):k.find(".tve_lg_radio input[type=radio]").each(function(t,e){e.checked&&e.attributes["data-custom-tag"]&&(n=e.attributes["data-custom-tag"].value)}),n},j=function(){var n="";return"true"===k.find(".tve_lg_checkbox:not(.tcb-lg-consent)").attr("data-answer-tag")?k.find(".tve_lg_checkbox input[type=checkbox]").each(function(t,e){if(e.checked)if(e.attributes["data-custom-tag"]){var r=e.attributes["data-custom-tag"].value;n=0<n.length?n+","+r:r}else{var a=e.value;n=0<n.length?n+","+a:a}}):k.find(".tve_lg_checkbox input[type=checkbox]").each(function(t,e){if(e.checked&&e.attributes["data-custom-tag"]){var r=e.attributes["data-custom-tag"].value;n=0<n.length?n+","+r:r}}),n},U=function(){var t=k.find(".tve_lg_dropdown"),e=t.find(".tve-lg-dropdown-option.tve-state-active");return"true"===t.attr("data-answer-tag")?e.attr("data-custom-tag")?0<e.length?e.attr("data-custom-tag"):"":0<e.length?e.attr("data-value"):"":0<e.length?e.attr("data-custom-tag"):""},A=function(a){["activecampaign","aweber","convertkit","drip","klicktipp","mailchimp","sendlane","zapier"].forEach(function(t){var e=k.find("input[type=hidden]#".concat(t,"_tags")),r=0<e.length?e.attr("value"):"";e.length&&(0===r.length&&","===a.slice(-1)&&(a=a.slice(0,-1)),r=a.replace(/['"`\\]/g,"")+r,e.attr("value",r))})};function S(){k.find(".tve-state-expanded").removeClass("tve-state-expanded"),k.find(".tve_lg_dropdown").each(function(){var t=I(this),e=t.attr("data-show-placeholder"),r=t.find('[data-default="1"]'),a=r.length?r:t.find(".tve-lg-dropdown-option,.tve-dynamic-dropdown-option").first(),n=t.find("input");e?(t.find(".tve-lg-dropdown-trigger .tve-disabled-text-inner").html(n.attr("data-placeholder")),n.removeAttr("value")):(t.find(".tve-lg-dropdown-trigger .tve-disabled-text-inner").html(a.text()),n.attr("value",a.attr("data-value")))}),k[0].reset(),k.find("textarea").trigger("input"),k.find('input[type="radio"][data-default="1"], input[type="checkbox"][data-default="1"] ').attr("checked","checked").closest(".tve_lg_radio_wrapper, .tve_lg_checkbox_wrapper").addClass("tve-state-expanded"),TCB_Front.smartComplete.handleSmartComplete(k)}function L(t,e,r){var a=0<arguments.length&&void 0!==t&&t,n=1<arguments.length&&void 0!==e?e:"",i=2<arguments.length&&void 0!==r?r:"",o=k.find("#_error_message_option").val(),s=k.find("#_autofill").val(),d=k.find("#_submit_option").val(),c=s?k.find("input").not("input[type=hidden],input[type=password]").serializeArray():"",l=!1;if(!d||"reload"===d&&(a||1!==o))location.reload();else if("redirect"===d){var f=k.find("#_back_url").val();f=TCB_Front.Utils.addHttp(f),s&&c&&!TCB_Front.Utils.isExternal(f)&&TCB_Front.setCookie("account_create_fields",JSON.stringify(c),{path:"/"}),"1"===k.find("#_sendParams").val()&&(f=TCB_Front.Utils.appendFormParamsToURL(f,k)),f&&TCB_Front.isValidUrl(f)&&(a||1!==o)&&(location.href=f,l=!0)}else if("state"===d&&a){var p=TL_Front.parent_state,u=k.find(".tve-switch-state-trigger"),v=-1!==u.attr("data-tcb-events").indexOf("tl_state_lightbox"),h=0<k.parents(".tve_post_lightbox").length;if(u.trigger("click"),k.tve_form_loading(!0),v)if(h)p&&(TL_Front.close_form(p),delete TL_Front.parent_state);else{var _=I.Event("leads_messages.tcb");_.lightbox_state=!0,k.trigger(_)}TL_Front.parent_state&&(k.parents(".tl-style").first().find(".tve_p_lb_close").trigger("click"),delete TL_Front.parent_state),l=!0}else"klicktipp-redirect"===d&&a?n&&TCB_Front.isValidUrl(n)&&(location.href=n,l=!0):"page"===d&&a&&i&&TCB_Front.isValidUrl(i)&&(location.href=i,l=!0);return l}function O(){I(".tve_p_lb_background.tve_lb_open .tve_p_lb_close").trigger("click")}x.data("form-target")&&x.data("form-target").length&&x.find("form").attr("target",x.data("form-target")),function(){var t=TCB_Front.queryString.get("affiliate");if(t){var e=I("<input/>");e.attr("type","hidden").attr("name","tve_affiliate").val(t),k.append(e)}}(),x.find(".tve-lg-err-msg").length&&function(){k.find(".tve_submit_container .thrv_icon").on("click",function(){k.submit()}),k.find(".tve-form-button .tve-form-button-submit").on("click",function(t){return t.preventDefault(),t.stopPropagation(),k.submit(),!1});function a(c,t,e){if(k.data("tve-force-submit"))return!0;var r=k.find(".consent-config");r.length&&!r.attr("value")&&"none"!==k.find(".tcb-lg-consent").css("display")&&k.find('[name="user_consent"]').attr("data-required",1);var n=!0,a=I(t),i={};E.init(),a.find("input, select, textarea").each(function(){var t=I(this),e=t.data("validation"),r=parseInt(this.dataset.required),a=t.data("iphone-placeholder");""!==a&&t.val()===a&&t.val(""),"password"===t.attr("type")&&(i[t.attr("name")]=t),1===r&&(E.required(t,w.required)||(n=!1)),void 0!==e&&"none"!==e&&E[e]&&(E[e](t,w[e])||(n=!1))});var o=a.find('textarea[name="g-recaptcha-response"]');if(0<o.length&&(o.first().val()||(E.markApiError("Please validate captcha form",a.find(".tve-captcha-container"),"captcha"),setTimeout(function(){I("#tve-lg-error-container").fadeOut("slow")},5e3),n=!1)),2===Object.keys(i).length&&(E.mismatch(i,w.passwordmismatch)||(n=!1)),P.hasFileUpload()&&C){var s=C.isValid();!0!==s&&(n=!1,E.markApiError(s,C.$el,"upload"))}if(!n)return E.show(),k.find("."+E.errClass).first().trigger("focus"),!1;if("function"==typeof q.showFormLoader?q.showFormLoader():k.tve_form_loading(),"api"===k.parents(".thrv_lead_generation").attr("data-connection")||k.parents(".tcb-registration-form").length){var d=k.find("#_autofill").val()?k.find("input").not("input[type=hidden],input[type=password]").serializeArray():"";if(x.attr("data-settings-id")||function(){var t=B(),e=j(),r=U(),a=T(t)+T(e)+T(r);a.length&&A(a)}(),"function"==typeof q.submitHandler){var l={autofillValues:d,token:e};return P.hasFileUpload()&&C&&(l.uploader=C),q.submitHandler.call(null,c,l)}var f={};I.each(k.serializeArray(),function(t,e){f[e.name]=e.value});var p=k.serialize()+"&action=tve_api_form_submit&url="+encodeURIComponent(location.href),u=k.find("#_submit_option").val();p+="&_tcb_id="+(x.attr("data-settings-id")||"")+"&tcb_token="+(10*Date.now()).toString(32);var v=I.Event("form_conversion.tcb");k.trigger(v),v.post_data&&(p+="&"+I.param(v.post_data));var h=k.closest(".tar-main-content[data-post-id]"),_=h.length?h.attr("data-post-id"):tve_frontend_options.post_id;return _&&(p+="&post_id=".concat(_)),p+="&frontend_post_id=".concat(tve_frontend_options.post_id),e&&(p+="&g-recaptcha-response="+e),P.hasFileUpload()&&C&&(p=C.appendExtraData(p)),I.ajax({type:"post",xhrFields:{withCredentials:!0},url:tve_frontend_options.ajaxurl,dataType:"json",data:p}).fail(function(){E.markApiError("An error occurred while submitting your data. Please try again").show(),k.tve_form_loading(!0)}).done(function(t){P.hasFileUpload()&&C&&C.clear(),k.find('input[type="password"]').trigger("keyup");var e="";try{var r=t.form_messages||{},a="";if(t.redirect&&(a=t.redirect,delete t.redirect),delete t.form_messages,t.variation){t.variation;delete t.variation}if(t.back_url){t.back_url;delete t.back_url}var n=0<Object.keys(t).length&&!t.error;if("object"===_typeof(t.error_message)&&t.error_message.length){var i=t.error_message,o="";i.forEach(function(t){"string"==typeof t&&t.length&&(t=t.trim(),E.markApiError(t).show(),o+=t+"\n")}),k.tve_form_loading(!0),o.length&&(e=o,TCB_Front.toast(o,!0))}if(t.error){if("captcha"===t.field){var s=w.recaptcha||t.error;E.markApiError(s).show(),k.tve_form_loading(!0)}else F(n,r);return c.preventDefault(),!1}}catch(t){console.log(t)}var d=I.Event("lead_conversion_success.tcb",{form_data:f});return k.trigger(d),d.content_unlocked&&"message"!==u&&"state"!==u?(c.preventDefault(),!1):(O(),L(n,a,"undefined"!=typeof back_url?back_url:"")?(k.tve_form_loading(!0),void S()):(S(),0===e.length&&F(n,r),!0))}).always(function(){"undefined"!=typeof grecaptcha&&"function"==typeof grecaptcha.reset&&(!tve_dash_front.recaptcha.connection||tve_dash_front.recaptcha.connection&&"v3"!==tve_dash_front.recaptcha.connection.version)&&grecaptcha.reset()}),c.stopPropagation(),!1}var g=I.Event("should_submit_form.tcb");if(k.trigger(g),"1"!==k.find("input#_asset_option").val()&&!g.flag_need_data)return!0;var m,b=k.serialize()+"&action=tve_custom_form_submit&email="+function(t){if(t.find('[data-validation="email"]').length)return t.find('[data-validation="email"]').val();var e="";return t.find("input").each(function(){if(this.name&&this.name.match(/email/i))return e=this.value,!1}),e}(k)+"&name="+(m=!1,k.find("input").each(function(){var t=I(this),e=t.attr("placeholder"),r=t.attr("name");if(e&&-1!==e.toLowerCase().indexOf("name")||r&&-1!==r.toLowerCase().indexOf("name"))return m=t,!1}),!1!==m?m.val():""),y=I.Event("form_conversion.tcb");return k.trigger(y),y.post_data&&(b+="&"+I.param(y.post_data)),tve_frontend_options.post_id&&(b+="&post_id="+tve_frontend_options.post_id),I.ajax({type:"post",xhrFields:{withCredentials:!0},url:tve_frontend_options.ajaxurl,data:b}).always(function(t){k.find("input,select,textarea").removeAttr("disabled"),k.find(".tve-form-button").removeClass("tar-disabled"),k.data("tve-force-submit",!0).submit()}),!1}var w=E.getErrors(x);k.on("submit",function(e){var r=this;return I(this).find(".tve-captcha-container").length&&tve_dash_front.recaptcha.connection&&"v3"===tve_dash_front.recaptcha.connection.version?(grecaptcha.ready(function(){grecaptcha.execute(tve_dash_front.recaptcha.site_key,{action:"submit"}).then(function(t){a(e,r,t)})}),!1):a(e,r)})}()})},TCB_Front.setModuleLoadedStatus("lead-generation",!0)}}(ThriveGlobal.$j,TCB_Front)}}}}}}})("workspace/editor/js/frontend/modules/lead-generation");