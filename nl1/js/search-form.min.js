/*! Thrive Architect - 2022-01-25
* http://www.thrivethemes.com/
* Copyright (c) 2022 Thrive Themes */

"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(l){var p,u,s,f,m,o={".js":[],".json":[],".css":[],".html":[]},c="function"==typeof require?require:null;return f=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},m=function(e,t,i){var n,s;if("function"==typeof e[t+i])return t+i;for(n=0;s=o[i][n];++n)if("function"==typeof e[t+s])return t+s;return null},p=function(e,t,i,n,s,o){var a,r,l,c,h,d;for("."!==(a=(i=i.split("/")).pop())&&".."!==a||(i.push(a),a="");null!=(r=i.shift());)if(r&&"."!==r&&(".."===r?(e=t.pop(),o=o.slice(0,o.lastIndexOf("/"))):(t.push(e),e=e[r],o+="/"+r),!e))throw f(n);if(a&&"function"!=typeof e[a]&&((d=(d=(d=(d=m(e,a,".js"))||m(e,a,".json"))||m(e,a,".css"))||m(e,a,".html"))?a=d:2!==s&&"object"===_typeof(e[a])&&(t.push(e),e=e[a],o+="/"+a,a="")),!a)return 1!==s&&e[":mainpath:"]?p(e,t,e[":mainpath:"],n,1,o):p(e,t,"index",n,2,o);if(!(h=e[a]))throw f(n);return h.hasOwnProperty("module")?h.module.exports:(l={},h.module=c={exports:l,id:o+"/"+a},h.call(l,l,c,u(e,t,o)),c.exports)},s=function(e,t,i,n){var s,o=i,a=i.charAt(0),r=0;if("/"===a){if(o=o.slice(1),!(e=l["/"])){if(c)return c(i);throw f(i)}n="/",t=[]}else if("."!==a){if(s=o.split("/",1)[0],!(e=l[s])){if(c)return c(i);throw f(i)}n=s,t=[],(o=o.slice(s.length+1))||(r=(o=e[":mainpath:"])?1:(o="index",2))}return p(e,t,o,i,r,n)},(u=function(t,i,n){return function(e){return s(t,[].concat(i),e,n)}})(l,[],"")}({workspace:{editor:{js:{frontend:{modules:{"search-form.js":function(e,a,t){void 0===TCB_Front.js_modules["search-form"]&&TCB_Front.setModuleLoadedStatus("search-form",!1),function(s,o){if(!TCB_Front.isModuleLoaded("search-form")){var n=".thrv-search-form",i=function(e){try{new t(s(e),!!TCB_Front.Utils.isEditorPage())}catch(e){}};window.addEventListener("load",function(){o.$body.find(n).each(function(e,t){i(t)})}),s(window).on("tcb_after_dom_ready",function(){s(n).each(function(e,t){i(t)})});var t=function(){function i(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];_classCallCheck(this,i),e.is(n)&&!e.hasClass("thrv-sticky-search")&&(e.data("tcb.search")&&!t||(this.$element=e,this.$form=e.find("form"),this.$input=e.find(".thrv-sf-input"),this.$submit=e.find(".thrv-sf-submit"),this.$submitButton=this.$submit.find("button"),this.isEditor=t,this.onResize(),this.isEditor?this.$form.off("submit").on("submit",function(){return!1}):this.bindEvents(),this.$element.attr("id")&&this.$element.attr("data-selector","".concat(n,"#").concat(this.$element.attr("id"))),e.data("tcb.search",this)))}return _createClass(i,[{key:"onResize",value:function(){this.closeAnimation(),this.readData(),this.$input.toggle(!["expand","overlay"].includes(this.currentDisplay)),this.isEditor&&this.isElementEditable()&&this.$element.attr("data-editor-preview")&&this.startAnimation()}},{key:"readData",value:function(){this.currentDisplay=o.getMediaAttr(this.$element,"data-display"),this.currentPosition=o.getMediaAttr(this.$element,"data-position"),this.wrapperSize=this.$element.outerWidth(),this.submitImage=o.inlineCssVariable(this.$submitButton,"background-image"),this.submitColor=o.inlineCssVariable(this.$submitButton,"background-color")}},{key:"startAnimation",value:function(){switch(this.currentDisplay||o.getMediaAttr(this.$element,"data-display")){case"expand":this.showExpand();break;case"overlay":this.showOverlay();break;case"tooltip-click":case"tooltip-hover":this.showTooltip();break;default:clearTimeout(this.hideExpandTimeout),this.$input.show(),o.inlineCssVariable(this.$element,"--tve-applied-max-width","")}}},{key:"closeAnimation",value:function(e){var t=0<arguments.length&&void 0!==e&&e;switch(this.currentDisplay||o.getMediaAttr(this.$element,"data-display")){case"expand":this.hideExpand(t);break;case"overlay":this.hideOverlay();break;case"tooltip-click":case"tooltip-hover":this.hideTooltip();break;default:o.inlineCssVariable(this.$element,"--tve-applied-max-width",""),o.inlineCssVariable(this.$input,{transition:"",transform:"",display:"block"})}}},{key:"bindEvents",value:function(){var i=this,e=this.onResize.bind(this);o.addResizeCallback(e),this.$submit.off("click.search").on("click.search",function(){if(i.isEditor)return!1;switch(i.currentDisplay){case"expand":if(i.isInputHidden())return i.showExpand(),!1;break;case"overlay":return i.showOverlay(),!1;case"tooltip-click":if(i.isInputHidden())return i.showTooltip(),!1}}),o.$body.on("click.search",function(e){var t=s(e.target);if(t.length&&i.isOpened)switch(i.currentDisplay){case"expand":i.isInsideElement(i.$element,t)||i.hideExpand();break;case"overlay":i.$element.data("$$clone")&&!i.isInsideElement(i.$element.data("$$clone"),t)&&i.hideOverlay();break;case"tooltip-click":case"tooltip-hover":i.isInsideElement(i.$element,t)||i.hideTooltip()}}),"overlay"!==this.currentDisplay&&this.bindMouseEvents()}},{key:"bindMouseEvents",value:function(){function e(){t.hideInputTimeout=setTimeout(function(){"expand"===t.currentDisplay?t.hideExpand():t.hideTooltip()},5e3)}var t=this;this.$submit.off("mouseenter.search").on("mouseenter.search",function(){t.isHoverTooltip()&&t.showTooltip(),clearTimeout(t.hideInputTimeout)}),this.$input.off("mouseenter.search_input").on("mouseenter.search_input",function(){clearTimeout(t.hideInputTimeout)}),this.$submit.off("mouseleave.search").on("mouseleave.search",e),this.$input.off("mouseleave.search_input").on("mouseleave.search_input",e)}},{key:"isHoverTooltip",value:function(){return"desktop"===o.getDisplayType()&&"tooltip-hover"===this.$element.attr("data-display-d")}},{key:"bindCloseSticky",value:function(){var e=this;!this.isEditor&&this.$element.data("$$clone")&&this.$element.data("$$clone").jquery&&this.$element.data("$$clone").find(".tcb-sf-close-icon").off("click.close_search").on("click.close_search",function(){e.hideOverlay()})}},{key:"toggleOverlay",value:function(e){this["".concat(!(0<arguments.length&&void 0!==e)||e?"show":"hide","Overlay")]()}},{key:"toggleTooltip",value:function(e){this["".concat(!(0<arguments.length&&void 0!==e)||e?"show":"hide","Tooltip")]()}},{key:"toggleExpand",value:function(e){this["".concat(!(0<arguments.length&&void 0!==e)||e?"show":"hide","Expand")]()}},{key:"showOverlay",value:function(){if(!this.$element.data("$$clone")){var e=this.$element.attr("id").replace("tve-sf-","tve-sf-overlay-"),t=this.$element.clone(),i=s('<div id="'.concat(e,'" data-selector=".tve-sf-overlay-container#').concat(e,'" class="thrv_wrapper tve-sf-overlay-container tve_no_icons tve_no_drag"><div class="tve-content-box-background" data-selector="#').concat(e,' .tve-content-box-background"></div><div class="tve-cb" data-selector="#').concat(e,' .tve-cb"></div></div>')),n=i.find(".tve-cb");this.$element.hasClass("overlay-icon")?i.prepend('<div class="thrv_wrapper tcb-sf-close-icon thrv_icon tve_no_drag tve_no_icons tcb-icon-inherit-style tcb-icon-display" data-selector="#'.concat(e,' .tcb-sf-close-icon"></svg>').concat(o.icons.get("cross").replace("tcb-cross","tcb-icon tcb-cross"),"</div>")):t.prepend('<div class="thrv_wrapper tcb-sf-close-icon thrv_icon tve_no_drag tve_no_icons tcb-icon-inherit-style tcb-icon-display" data-selector=".thrv-search-form#'.concat(this.$element.attr("id"),' .tcb-sf-close-icon"></svg>').concat(o.icons.get("cross").replace("tcb-cross","tcb-icon tcb-cross"),"</div>")),t.addClass("thrv-sticky-search tve_no_icons"),n.append(t),this.$element.closest(o.identifiers.pageStickyParent).append(i),this.$element.data("$$clone",t),this.$element.data("$$overlayWrapper",i),i.data("$$parent",this.$element),t.data("$$parent",this.$element),t.attr("id",this.$element.attr("id")),t.find(".thrv-sf-input").show(),this.bindCloseSticky()}this.$element.hasClass("tcb-compact-edit-mode")&&this.$element.data("$$clone")&&this.$element.data("$$clone").find(".tve-prevent-content-edit").removeClass("tve-prevent-content-edit"),this.zIndexOrder(),o.$body.addClass("tcb-body-search-overlay"),this.$element.data("$$clone").removeClass("tcb-permanently-hidden canvas-mode tcb-compact-element"),this.$element.data("$$overlayWrapper").removeClass("tcb-permanently-hidden canvas-mode tcb-compact-element").css({top:"-500px",opacity:"0"}).animate({top:TCB_Front.bodyOffsetTop(),opacity:"1"}),this.isOpened=!0}},{key:"hideOverlay",value:function(){var e=this;o.$body.removeClass("tcb-body-search-overlay"),this.$element.data("$$overlayWrapper")&&(this.isEditor?(this.$element.data("$$overlayWrapper").remove(),this.$element.removeData("$$overlayWrapper"),this.$element.removeData("$$clone")):this.$element.data("$$overlayWrapper").css({top:TCB_Front.bodyOffsetTop(),opacity:"1"}).animate({top:"-1000px",opacity:"0"},{done:function(){e.zIndexOrder(!1),e.$element.data("$$overlayWrapper").addClass("tcb-permanently-hidden")}})),this.isOpened=!1}},{key:"zIndexOrder",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e;("overlay"===this.currentDisplay?this.$element.parentsUntil("body,#wrapper"):this.$element).each(function(){var e=s(this);t?"static"===e.css("position")||e.hasClass("thrv_header")||e.css("z-index",101).addClass("tcb-sfp"):e.css("z-index","").removeClass("tcb-sfp")})}},{key:"showExpand",value:function(){var e,t=parseFloat(o.inlineCssVariable(this.$element,"--tve-applied-max-width"));t="left"===this.currentPosition?Math.min(parseInt(this.$element.offset().left),t):Math.min(parseInt(o.$window.width()-(this.$element.offset().left+this.$element.outerWidth())),t),o.inlineCssVariable(this.$element,"--tve-applied-max-width","".concat(t,"px"),"important"),o.inlineCssVariable(this.$input,(_defineProperty(e={top:this.$element.css("padding-top"),transform:"none",transition:"width 0.5s"},"left"===this.currentPosition?"right":"left","100%"),_defineProperty(e,this.currentPosition,"auto"),e)),this.$input.show().addClass("tcb-sf-expand"),this.zIndexOrder(),clearTimeout(this.hideExpandTimeout),this.isOpened=!0}},{key:"hideExpand",value:function(e){function t(){o.inlineCssVariable(i.$element,"--tve-applied-max-width",""),o.inlineCssVariable(i.$input,{top:"",transition:"",left:"",right:"",transform:""}),i.$input.hide()}var i=this,n=0<arguments.length&&void 0!==e&&e;this.$input.removeClass("tcb-sf-expand"),n?t():this.hideExpandTimeout=setTimeout(t,350),this.zIndexOrder(!1),this.isOpened=!1}},{key:"showTooltip",value:function(){var e;o.inlineCssVariable(this.$element,"--tve-applied-max-width","");var t=parseFloat(o.inlineCssVariable(this.$element,"--tve-applied-max-width")),i=this.$element.outerWidth();t="left"===this.currentPosition?Math.min(parseInt(this.$element.offset().left+i),t):Math.min(parseInt(o.$window.width()-this.$element.offset().left),t),o.inlineCssVariable(this.$element,"--tve-applied-max-width","".concat(t,"px"),"important"),this.$element.addClass("tcb-sf-show-tooltip"),o.inlineCssVariable(this.$input,(_defineProperty(e={"--tcb-sf-bg-img":this.submitImage,"--tcb-sf-bg-color":this.submitColor,display:""},this.currentPosition,"auto"),_defineProperty(e,"left"===this.currentPosition?"right":"left","0"),_defineProperty(e,"--tve-sf-after-left","left"===this.currentPosition?"auto":"".concat(this.wrapperSize/2-10,"px")),_defineProperty(e,"--tve-sf-after-right","right"===this.currentPosition?"auto":"".concat(this.wrapperSize/2-10,"px")),e)),this.zIndexOrder(),this.isOpened=!0}},{key:"hideTooltip",value:function(){o.inlineCssVariable(this.$element,"--tve-applied-max-width",""),o.inlineCssVariable(this.$input,{left:"",right:""}),this.$element.removeClass("tcb-sf-show-tooltip"),this.zIndexOrder(!1),this.isOpened=!1}},{key:"isInputHidden",value:function(){return"none"===this.$input.css("display")||!this.$input.outerHeight()||!this.$input.outerWidth()}},{key:"isInsideElement",value:function(e,t){return e.is(t)||e.find(t).length}},{key:"isElementEditable",value:function(){var e=!1;try{TVE&&TVE.CONST&&TVE.Editor_Page&&(e=!(TVE.CONST.theme&&TVE.CONST.theme.is_theme_template&&this.$element.closest(".tcb-post-content").length)&&!!TVE.Editor_Page.selection_manager.isElementEditable(this.$element))}catch(e){}return e}}]),i}();window.TCB_Front.TARSearch=t,a.exports=t,TCB_Front.setModuleLoadedStatus("search-form",!0)}}(ThriveGlobal.$j,TCB_Front)}}}}}}})("workspace/editor/js/frontend/modules/search-form");