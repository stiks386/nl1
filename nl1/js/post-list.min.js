/*! Thrive Architect - 2022-01-25
* http://www.thrivethemes.com/
* Copyright (c) 2022 Thrive Themes */

"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(l){var f,p,o,h,g,s={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return h=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},g=function(t,e,n){var i,o;if("function"==typeof t[e+n])return e+n;for(i=0;o=s[n][i];++i)if("function"==typeof t[e+o])return e+o;return null},f=function(t,e,n,i,o,s){var r,a,l,u,d,c;for("."!==(r=(n=n.split("/")).pop())&&".."!==r||(n.push(r),r="");null!=(a=n.shift());)if(a&&"."!==a&&(".."===a?(t=e.pop(),s=s.slice(0,s.lastIndexOf("/"))):(e.push(t),t=t[a],s+="/"+a),!t))throw h(i);if(r&&"function"!=typeof t[r]&&((c=(c=(c=(c=g(t,r,".js"))||g(t,r,".json"))||g(t,r,".css"))||g(t,r,".html"))?r=c:2!==o&&"object"===_typeof(t[r])&&(e.push(t),t=t[r],s+="/"+r,r="")),!r)return 1!==o&&t[":mainpath:"]?f(t,e,t[":mainpath:"],i,1,s):f(t,e,"index",i,2,s);if(!(d=t[r]))throw h(i);return d.hasOwnProperty("module")?d.module.exports:(l={},d.module=u={exports:l,id:s+"/"+r},d.call(l,l,u,p(t,e,s)),u.exports)},o=function(t,e,n,i){var o,s=n,r=n.charAt(0),a=0;if("/"===r){if(s=s.slice(1),!(t=l["/"])){if(u)return u(n);throw h(n)}i="/",e=[]}else if("."!==r){if(o=s.split("/",1)[0],!(t=l[o])){if(u)return u(n);throw h(n)}i=o,e=[],(s=s.slice(o.length+1))||(a=(s=t[":mainpath:"])?1:(s="index",2))}return f(t,e,s,n,a,i)},(p=function(e,n,i){return function(t){return o(e,[].concat(n),t,i)}})(l,[],"")}({workspace:{editor:{js:{frontend:{modules:{"post-list.js":function(t,e,n){void 0===TCB_Front.js_modules["post-list"]&&TCB_Front.setModuleLoadedStatus("post-list",!1),function(s){if(!TCB_Front.isModuleLoaded("post-list")){s(window).on("tcb_after_dom_ready",function(){s(".tcb-post-list").each(function(t,e){new n(s(e)).renderPagination()})});var n=function(){function i(t){_classCallCheck(this,i),this.$element=t,this.content="",this.listArgs={};var e=this.getAttr("data-css"),n=s.Event("tcb_post_list_identifier.tcb");this.$element.trigger(n),n.identifier&&(e=n.identifier),this.identifier=e,this.listIdentifier="article",tve_frontend_options.is_editor_page?this.editorInit():this.frontendInit()}return _createClass(i,[{key:"getPaginationInstance",value:function(){if(this.listArgs&&this.listArgs.attr){var t=this.listArgs.attr["pagination-type"];if(t.length&&"none"!==t&&void 0!==TCB_Front.Pagination)return TCB_Front.Pagination.factory(t,this)}}},{key:"renderPagination",value:function(){this.pagination=this.getPaginationInstance(),this.pagination&&(tve_frontend_options.is_editor_page||this.pagination.addLoadListeners(),this.pagination.render())}},{key:"editorInit",value:function(){this.listArgs={attr:{"pagination-type":this.getAttr("data-pagination-type"),total_post_count:this.getAttr("data-total_post_count")?this.getAttr("data-total_post_count"):100,pages_near_current:this.getAttr("data-pages_near_current")?this.getAttr("data-pages_near_current"):2},query:{posts_per_page:this.getAttr("data-posts_per_page")?this.getAttr("data-posts_per_page"):6,paged:1}}}},{key:"frontendInit",value:function(){var e=this;"undefined"==typeof tcb_post_lists?console.warn("Error initializing the post list parameters"):(this.listArgs=tcb_post_lists.find(function(t){return e.$element.is(t.identifier)}),this.listArgs&&(this.listArgs.query&&void 0!==this.listArgs.query.offset&&delete this.listArgs.query.offset,this.listArgs.attr.queried_object=0,this.listArgs.query.queried_object=tve_frontend_options.queried_object,this.content=s('.tcb-post-list-template[data-identifier="'+this.listArgs.template+'"]').html()))}},{key:"getAttr",value:function(t){return this.$element.attr(t)}},{key:"getItems",value:function(e,t){var n=this,i=1<arguments.length&&void 0!==t?t:this.listArgs;s.ajax({url:tve_frontend_options.routes.posts+"/html",method:"POST",headers:{"X-WP-Nonce":tve_frontend_options.nonce},data:{content:this.content,args:i},success:function(t){"function"==typeof e&&e(t),n.initItems(),TCB_Front.event_triggers(n.$element)},error:function(){console.warn("There was an error and the content could not be loaded.")}})}},{key:"insertItems",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e;if(t.count&&t.posts){var i=this.$element.clone().empty();for(var o in t.posts)t.posts.hasOwnProperty(o)&&i.append(t.posts[o]);n?(this.$element.replaceWith(i),this.identifier.includes("tve-u-")?this.$element=s(".tcb-post-list[data-css=".concat(this.identifier,"]")):this.$element=s(this.identifier),s(window).trigger("tcb_post_list_after_item_insert")):(this.$element.append(i.html()),this.masonryRedo())}}},{key:"isLoading",value:function(){return this.$element.data("loading")}},{key:"enableLoading",value:function(t){var e=0<arguments.length&&void 0!==t?t:"";this.$element.addClass("tve-loading"+(e.length?" "+e:"")),this.$element.data("loading",!0)}},{key:"disableLoading",value:function(){var t=this;setTimeout(function(){return t.$element.removeClass("tve-loading load-bot")},100),this.$element.data("loading",!1)}},{key:"masonryRedo",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.$element;if(e.length&&e.data("masonry")){var n=e.find("".concat(this.listIdentifier,":not(.masonry-brick)"));e.masonry("appended",n),e.masonry("layout")}}},{key:"initItems",value:function(){(this.$element.find(".tcb-custom-field-source.thrv-rating").length||this.$element.find("[data-shortcode-id*='acf_']").length)&&TCB_Front.dynamicElements.init()}}]),i}();window.TCB_Front.PostList=n,TCB_Front.setModuleLoadedStatus("post-list",!0)}}(ThriveGlobal.$j)}}}}}}})("workspace/editor/js/frontend/modules/post-list");